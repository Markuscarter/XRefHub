<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Xrefhub Analysis Tool</title>
    <link rel="stylesheet" href="popup.css">
</head>
<body>
    <div class="container">
        <header class="main-header">
            <h1>Xrefhub</h1>
            <div class="header-actions">
                <button id="open-in-tab-button" class="btn-icon" title="Open in New Tab">↗️</button>
                <a href="settings.html" id="settings-link" class="btn-icon" title="Settings" target="_blank">⚙️</a>
            </div>
        </header>
        <main>
            <div class="card">
                <h2 class="card-header">Post Content</h2>
                <textarea id="post-content" rows="4" placeholder="Scanning page for content..."></textarea>
                <button id="analyze-button" class="btn btn-primary" style="margin-top: 1rem; width: 100%;">Analyze Page</button>
                <button id="test-scan-button" class="btn btn-secondary" style="margin-top: 0.5rem; width: 100%;">Test Scan</button>
                <button id="debug-scan-button" class="btn btn-secondary" style="margin-top: 0.5rem; width: 100%;">Debug Scan</button>
            </div>

            <div class="card">
                <h2 class="card-header">AI Analysis</h2>
                
                <strong>Summary & Intent:</strong>
                <div id="ai-summary" class="readonly-field">Awaiting analysis...</div>

                <strong style="margin-top: 1rem; display: block;">Policy Resolution:</strong>
                <div id="ai-resolution" class="readonly-field">Awaiting analysis...</div>
                
                <button id="deeper-analysis-button" class="btn btn-secondary" style="margin-top: 1rem;">Get Deeper Analysis</button>
                <div id="deeper-analysis-result" class="readonly-field" style="display: none; margin-top: 1rem;"></div>
            </div>
            
            <div class="card">
                <h2 class="card-header">Labels</h2>
                <div id="labels-container" class="labels-container">
                    <!-- Checkboxes will be populated here -->
                    <p>No labels loaded. Run analysis.</p>
                </div>
                <div id="label-correction-section" style="display: none; margin-top: 1rem;">
                    <strong>Correct AI Suggestions:</strong>
                    <div id="correction-options" class="correction-options">
                        <!-- Correction options will appear here -->
                    </div>
                    <button id="rescan-button" class="btn btn-secondary" style="margin-top: 0.5rem;">Rescan with Corrections</button>
                </div>
            </div>

            <div class="card">
                <h2 class="card-header">Final Output</h2>
                <textarea id="final-output" rows="3" readonly placeholder="Final output will appear here after submission is configured."></textarea>
            </div>

        </main>
        <footer>
            <div class="button-container">
                <button id="copy-button" class="btn">Copy Output</button>
                <button id="submit-button" class="btn btn-primary">Submit to Sheet</button>
            </div>
        </footer>
    </div>

    <div class="chat-container">
        <div id="chat-log" class="chat-log"></div>
        <div class="chat-input-area">
            <input type="text" id="chat-input" class="chat-input" placeholder="Ask a follow-up or type 'NBM'...">
            <button id="chat-send-button" class="btn btn-primary">Send</button>
        </div>
    </div>

    <script src="popup.js"></script>
</body>
</html> 